<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>LBDAIRY: Farmer-Farm Analysis</title>

    <!-- Custom fonts for this template-->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="css/sb-admin-2.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #4e73df;
            --primary-dark: #3c5aa6;
            --secondary-color: #858796;
            --success-color: #1cc88a;
            --success-dark: #17a673;
            --info-color: #36b9cc;
            --info-dark: #258391;
            --warning-color: #f6c23e;
            --warning-dark: #dda20a;
            --danger-color: #e74a3b;
            --danger-dark: #c73e1d;
            --light-color: #f8f9fc;
            --dark-color: #5a5c69;
            --border-color: #e3e6f0;
            --shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
            --shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.175);
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 0.875rem;
            line-height: 1.6;
            color: var(--dark-color);
            background-color: var(--light-color);
        }

        /* Enhanced Sidebar */
        .sidebar {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            box-shadow: 0 0 30px rgba(0,0,0,0.1);
        }

        .sidebar-brand {
            padding: 1.5rem 1rem;
            background: rgba(255,255,255,0.1);
            margin-bottom: 1rem;
            border-radius: 0 0 20px 20px;
        }

        .sidebar .nav-link {
            padding: 0.75rem 1rem;
            margin: 0.25rem 0.5rem;
            border-radius: 8px;
            transition: var(--transition);
            font-weight: 500;
        }

        .sidebar .nav-link:hover {
            background: rgba(255,255,255,0.15);
            transform: translateX(5px);
        }

        .sidebar .nav-link.active {
            background: rgba(255,255,255,0.2);
            border-left: 4px solid #fff;
        }

        /* Enhanced Cards */
        .card {
            border: none;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            transition: var(--transition);
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            border-bottom: none;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .card-header h6 {
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-header h6::before {
            content: '';
            width: 4px;
            height: 20px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
        }

        /* Enhanced Buttons */
        .btn {
            border-radius: 8px;
            font-weight: 500;
            padding: 0.5rem 1rem;
            transition: var(--transition);
            border: none;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-color) 0%, var(--success-dark) 100%);
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning-color) 0%, var(--warning-dark) 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger-color) 0%, var(--danger-dark) 100%);
        }

        .btn-info {
            background: linear-gradient(135deg, var(--info-color) 0%, var(--info-dark) 100%);
        }

        .btn-light {
            background: linear-gradient(135deg, var(--light-color) 0%, #e9ecef 100%);
            color: var(--dark-color);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d 0%, #545b62 100%);
        }

        /* Enhanced Button Group */
        .btn-group .btn {
            margin: 0 0.25rem;
            border-radius: 25px !important;
            padding: 0.75rem 1.5rem;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .btn-group .btn i {
            font-size: 1.1rem;
        }

        /* Enhanced Metrics */
        .metric-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.5rem;
            background: linear-gradient(135deg, #fff 0%, var(--light-color) 100%);
            border-radius: 8px;
            margin-bottom: 0.75rem;
            border-left: 4px solid var(--primary-color);
            transition: var(--transition);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .metric-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .metric-item:nth-child(even) {
            border-left-color: var(--success-color);
        }

        .metric-item:nth-child(3n) {
            border-left-color: var(--warning-color);
        }

        .metric-item:nth-child(4n) {
            border-left-color: var(--info-color);
        }

        .metric-item:nth-child(5n) {
            border-left-color: var(--danger-color);
        }

        .metric-value {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--primary-color);
        }

        .metric-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            box-shadow: 0 3px 10px rgba(78, 115, 223, 0.3);
        }

        /* Enhanced Chart Container */
        .chart-container {
            background: linear-gradient(135deg, #fff 0%, var(--light-color) 100%);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
            position: relative;
        }

        /* Enhanced Analysis Text */
        #analysisText {
            background: linear-gradient(135deg, var(--light-color) 0%, #e9ecef 100%);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--info-color);
            font-size: 0.95rem;
            line-height: 1.7;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        #analysisText h6 {
            color: var(--info-color);
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Enhanced Modal */
        .modal-content {
            border-radius: var(--border-radius);
            border: none;
            box-shadow: var(--shadow-lg);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            padding: 1.5rem;
        }

        .modal-title {
            font-weight: 600;
            font-size: 1.2rem;
        }

        .modal-body {
            padding: 2rem;
        }

        /* Enhanced Topbar */
        .topbar {
            background: linear-gradient(135deg, #fff 0%, var(--light-color) 100%);
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        /* Enhanced Notifications */
        .dropdown-list {
            border-radius: var(--border-radius);
            border: none;
            box-shadow: var(--shadow-lg);
        }

        .dropdown-item {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #f1f1f1;
            transition: var(--transition);
        }

        .dropdown-item:hover {
            background: linear-gradient(135deg, var(--light-color) 0%, #e9ecef 100%);
            transform: translateX(5px);
        }

        /* Enhanced Icon Circles */
        .icon-circle {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* Enhanced Page Title */
        .page-title {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* Enhanced Form Controls */
        .form-control {
            border-radius: 8px;
            border: 2px solid #e9ecef;
            padding: 0.75rem 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(78, 115, 223, 0.1);
        }

        /* Enhanced Export Controls */
        .export-controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .dropdown-toggle::after {
            margin-left: 0.5rem;
        }

        /* Enhanced Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.6s ease-out;
        }

        .fade-in:nth-child(2) {
            animation-delay: 0.1s;
        }

        .fade-in:nth-child(3) {
            animation-delay: 0.2s;
        }

        /* Enhanced Loading State */
        .loading {
            position: relative;
            overflow: hidden;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* Enhanced Responsive Design */
        @media (max-width: 768px) {
            .btn-group {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .btn-group .btn {
                margin: 0.25rem 0;
                width: 100%;
                border-radius: 8px !important;
            }

            .card-header {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }

            .export-controls {
                justify-content: center;
                flex-wrap: wrap;
            }
        }

        /* Enhanced History Cards */
        .modal-body .card {
            border: 1px solid var(--border-color);
            transition: var(--transition);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .modal-body .card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 5px 20px rgba(78, 115, 223, 0.2);
            transform: translateY(-2px);
        }

        /* Enhanced dropdown styling */
        .dropdown-menu {
            border: none;
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 0.5rem 0;
        }

        .dropdown-item {
            padding: 0.75rem 1.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--dark-color);
            transition: var(--transition);
        }

        .dropdown-item:hover {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .dropdown-item i {
            width: 20px;
            text-align: center;
        }

        /* Stats enhancement for better visual hierarchy */
        .stats-enhancement {
            background: linear-gradient(135deg, #fff 0%, var(--light-color) 100%);
            border-radius: var(--border-radius);
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
    </style>
</head>
<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">

        <!-- Sidebar -->
        <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">
            <br><br><br>
            <!-- Sidebar - Brand -->
            <a class="sidebar-brand d-flex align-items-center justify-content-center" href="users.html">
                <div class="sidebar-brand-icon rotate-n-15">
                    <i class="fas fa-file"></i>
                </div>
                <div class="sidebar-brand-text mx-3">LBDairy</div>
            </a>

            <!-- Divider -->
            <hr class="sidebar-divider">

            <!-- Heading -->
            <div class="sidebar-heading">
                Tools
            </div>
            <li class="nav-item">
                <a class="nav-link" href="scan.html">
                    <i class="fas fa-qrcode"></i>
                    <span>Scan Livestock</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="manage_livestock.html">
                    <i class="fa fa-list"></i>
                    <span>Manage Livestock</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="manage_issues.html">
                    <i class="fa fa-exclamation-triangle"></i>
                    <span>Manage Issues</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="issue_alert.html">
                    <i class="fa fa-exclamation-triangle"></i>
                    <span>Issues Alerts</span></a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="farm_analysis.html">
                    <i class="fas fa-fw fa-database"></i>
                    <span>Farm Analysis</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="livestock_analysis.html">
                    <i class="fas fa-fw fa-database"></i>
                    <span>Livestock Analysis</span></a>
            </li>
            <!-- Divider -->
            <hr class="sidebar-divider">
            <!-- Heading -->
            <div class="sidebar-heading">
                Operation
            </div>
            <li class="nav-item">
                <a class="nav-link" href="sales.html">
                    <i class="fas fa-fw fa-donate"></i>
                    <span>Sales</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="clients.html">
                    <i class="fas fa-fw fa-users"></i>
                    <span>Clients</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="suppliers.html">
                    <i class="fa fa-users"></i>
                    <span>Suppliers</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="production.html">
                    <i class="fas fa-fw fa-tasks"></i>
                    <span>Production</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="expenses.html">
                    <i class="fas fa-fw fa-donate"></i>
                    <span>Expenses</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="inventory.html">
                    <i class="fa fa-list"></i>
                    <span>Inventory</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="schedule.html">
                    <i class="fas fa-fw fa-clock"></i>
                    <span>Calendar</span></a>
            </li>
            <!-- Divider -->
            <hr class="sidebar-divider">
            <!-- Heading -->
            <div class="sidebar-heading">
                Manage Profile
            </div>
            <li class="nav-item">
                <a class="nav-link" href="profile-f.html">
                    <i class="fas fa-fw fa-user"></i>
                    <span>Profile</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-toggle="modal" data-target="#logoutModal">
                    <i class="fas fa-fw fa-user"></i>
                    <span>Logout</span>
                </a>
            </li>

            <!-- Sidebar Toggler (Sidebar) -->
            <div class="text-center d-none d-md-inline">
                <button class="rounded-circle border-0" id="sidebarToggle"></button>
            </div>
        </ul>
        <!-- End of Sidebar -->
    

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!-- Topbar -->
                <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow fixed-top">

                    <!-- Sidebar Toggle (Topbar) -->
                    <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
                        <i class="fa fa-bars"></i>
                    </button>

                    <!-- Logo -->
                    <a class="navbar-brand d-flex align-items-center" href="users.html" style="padding: 0;">
                        <img src="img/logo.png" alt="LBDairy Logo" style="height: 60px; width: auto; margin-right: 10px;">
                    </a>

                    <!-- Topbar Search -->
                    <form class="d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search">
                        <div class="input-group">
                            <input type="text" class="form-control bg-light border-0 small" placeholder="Search for..."
                                aria-label="Search" aria-describedby="basic-addon2" id="navbarSearch" style="padding: 0.375rem 0.75rem; height: 38px;">
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="button" onclick="performNavbarSearch()">
                                    <i class="fas fa-search fa-sm"></i>
                                </button>
                            </div>
                        </div>
                    </form>

                    <!-- Topbar Navbar -->
                    <ul class="navbar-nav ml-auto">

                        <!-- Nav Item - Search Dropdown (Visible Only XS) -->
                        <li class="nav-item dropdown no-arrow d-sm-none">
                            <a class="nav-link dropdown-toggle" href="#" id="searchDropdown" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-search fa-fw"></i>
                            </a>
                            <!-- Dropdown - Messages -->
                            <div class="dropdown-menu dropdown-menu-right p-3 shadow animated--grow-in"
                                aria-labelledby="searchDropdown">
                                <form class="form-inline mr-auto w-100 navbar-search">
                                    <div class="input-group">
                                        <input type="text" class="form-control bg-light border-0 small"
                                            placeholder="Search for..." aria-label="Search"
                                            aria-describedby="basic-addon2">
                                        <div class="input-group-append">
                                            <button class="btn btn-primary" type="button">
                                                <i class="fas fa-search fa-sm"></i>
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </li>

                        <!-- Nav Item - Alerts -->
                        <li class="nav-item dropdown no-arrow mx-1">
                            <a class="nav-link dropdown-toggle" href="#" id="alertsDropdown" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-bell fa-fw"></i>
                                <!-- Counter - Alerts -->
                                <span class="badge badge-danger badge-counter">3+</span>
                            </a>
                            <!-- Dropdown - Alerts -->
                            <div class="dropdown-list dropdown-menu dropdown-menu-right shadow animated--grow-in"
                                aria-labelledby="alertsDropdown">
                                <h6 class="dropdown-header">
                                    <i class="fas fa-bell mr-2"></i>Notifications
                                </h6>
                                <a class="dropdown-item d-flex align-items-center" href="#">
                                    <div class="mr-3">
                                        <div class="icon-circle bg-warning">
                                            <i class="fas fa-chart-line text-white"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="small text-gray-500">January 10, 2025</div>
                                        <span class="font-weight-bold">New Report Available:</span> Weekly productivity analytics report is now ready for review.
                                    </div>
                                </a>
                                <a class="dropdown-item d-flex align-items-center" href="#">
                                    <div class="mr-3">
                                        <div class="icon-circle bg-success">
                                            <i class="fas fa-thermometer-half text-white"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="small text-gray-500">January 01, 2025</div>
                                        <span class="font-weight-bold">Temperature Alert:</span> Barn temperature exceeds 32Â°C. Cooling measures needed.
                                    </div>
                                </a>
                                <a class="dropdown-item d-flex align-items-center" href="#">
                                    <div class="mr-3">
                                        <div class="icon-circle bg-primary">
                                            <i class="fas fa-glass-whiskey text-white"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="small text-gray-500">January 05, 2025</div>
                                        <span class="font-weight-bold">Low Milk Yield Alert:</span> Average milk yield dropped by 12% this week.
                                    </div>
                                </a>
                                <a class="dropdown-item text-center small text-gray-500" href="#">Show All Alerts</a>
                            </div>
                        </li>

                        <div class="topbar-divider d-none d-sm-block"></div>

                        <!-- Nav Item - User Information -->
                        <li class="nav-item dropdown no-arrow">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="mr-2 d-none d-lg-inline text-gray-600 small">Farmer</span>
                                <img class="img-profile rounded-circle"
                                    src="img/ronaldo.png">
                            </a>
                            <!-- Dropdown - User Information -->
                            <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in"
                                aria-labelledby="userDropdown">
                                <a class="dropdown-item" href="profile-f.html">
                                    <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Profile
                                </a>
                                <a class="dropdown-item" href="#">
                                    <i class="fas fa-envelope fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Email
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="login-farmer.html" data-toggle="modal" data-target="#logoutModal">
                                    <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Logout
                                </a>
                            </div>
                        </li>

                    </ul>

                </nav>
                <!-- End of Topbar -->

                <!-- Begin Page Content -->
                <div class="container-fluid" style="padding-top: 6rem;">
                    <!-- Page Header -->
                    <div class="d-sm-flex align-items-center justify-content-between mb-4">
                        <h1 class="h3 mb-0 page-title">
                            <i class="fas fa-chart-line"></i>Farm Productivity Analysis
                        </h1>
                    </div>

                    <div class="row">
                        <div class="col-lg-8 mb-4">
                            <div class="card shadow mb-4 fade-in">
                                <div class="card-header">
                                    <h6>
                                        <i class="fas fa-chart-area"></i>Farm Productivity Analysis
                                    </h6>
                                    <div class="export-controls">
                                        <div class="btn-group">
                                            <button class="btn btn-light btn-sm dropdown-toggle" type="button" id="exportMenuButtonMain" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                <i class="fas fa-download mr-1"></i>Export Report
                                            </button>
                                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="exportMenuButtonMain">
                                                <a class="dropdown-item" href="#" onclick="exportCSV()">
                                                    <i class="fas fa-file-csv mr-2"></i>Download as CSV
                                                </a>
                                                <a class="dropdown-item" href="#" onclick="exportPNG()">
                                                    <i class="fas fa-file-image mr-2"></i>Download as PNG
                                                </a>
                                                <a class="dropdown-item" href="#" onclick="exportPDF()">
                                                    <i class="fas fa-file-pdf mr-2"></i>Download as PDF
                                                </a>
                                            </div>
                                        </div>
                                        <button class="btn btn-secondary btn-sm" onclick="printProductivity()">
                                            <i class="fas fa-print"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="btn-group mb-4 d-flex justify-content-center flex-wrap" role="group" aria-label="Data Options">
                                        <button type="button" class="btn btn-primary mx-1 mb-2" onclick="updateChart('milk')" title="Milk Production">
                                            <i class="fas fa-glass-whiskey mr-1"></i>Milk
                                        </button>
                                        <button type="button" class="btn btn-success mx-1 mb-2" onclick="updateChart('growth')" title="Growth Rate">
                                            <i class="fas fa-chart-line mr-1"></i>Growth
                                        </button>
                                        <button type="button" class="btn btn-warning mx-1 mb-2" onclick="updateChart('breeding')" title="Breeding">
                                            <i class="fas fa-seedling mr-1"></i>Breeding
                                        </button>
                                        <button type="button" class="btn btn-danger mx-1 mb-2" onclick="updateChart('health')" title="Health">
                                            <i class="fas fa-heartbeat mr-1"></i>Health
                                        </button>
                                    </div>
                                    <div class="chart-container">
                                        <canvas id="lineChart"></canvas>
                                    </div>
                                    <div id="analysisText" class="mt-4">
                                        <h6 class="font-weight-bold text-info mb-3">
                                            <i class="fas fa-lightbulb mr-2"></i>Analysis Insights
                                        </h6>
                                        <p style="line-height: 1.7; font-size: 0.95rem; margin: 0;">
                                            Milk production showed a consistent upward trend from January through June, indicating improved herd health and effective farm management practices. The gradual increase suggests that nutritional plans, breeding programs, and overall livestock care are positively impacting productivity. Continued monitoring and optimization of feed quality and animal welfare are recommended to sustain this growth. Seasonal factors and environmental conditions may also influence production levels, so maintaining detailed records will help in identifying further areas for improvement.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-lg-4 mb-4">
                            <div class="card shadow mb-4 fade-in">
                                <div class="card-header">
                                    <h6>
                                        <i class="fas fa-chart-pie"></i>Key Metrics
                                    </h6>
                                    <div class="export-controls">
                                        <button class="btn btn-info btn-sm" data-toggle="modal" data-target="#historyModal">
                                            <i class="fas fa-history mr-1"></i>View History
                                        </button>
                                    </div>
                                </div>
                                <div class="card-body" style="padding: 1rem;">
                                    <div class="metric-item">
                                        <div class="metric-icon">
                                            <i class="fas fa-glass-whiskey"></i>
                                        </div>
                                        <div style="flex: 1; margin-left: 1rem;">
                                            <div class="font-weight-bold">Total Milk Produced (Jan-Jun)</div>
                                            <div class="metric-value">875 liters</div>
                                        </div>
                                    </div>
                                    
                                    <div class="metric-item">
                                        <div class="metric-icon" style="background: linear-gradient(135deg, var(--success-color) 0%, var(--success-dark) 100%);">
                                            <i class="fas fa-chart-line"></i>
                                        </div>
                                        <div style="flex: 1; margin-left: 1rem;">
                                            <div class="font-weight-bold">Average Monthly Yield</div>
                                            <div class="metric-value" style="color: var(--success-color);">145.8 liters</div>
                                        </div>
                                    </div>
                                    
                                    <div class="metric-item">
                                        <div class="metric-icon" style="background: linear-gradient(135deg, var(--warning-color) 0%, var(--warning-dark) 100%);">
                                            <i class="fas fa-trophy"></i>
                                        </div>
                                        <div style="flex: 1; margin-left: 1rem;">
                                            <div class="font-weight-bold">Highest Month</div>
                                            <div class="metric-value" style="color: var(--warning-color);">June (170 liters)</div>
                                        </div>
                                    </div>
                                    
                                    <div class="metric-item">
                                        <div class="metric-icon" style="background: linear-gradient(135deg, var(--info-color) 0%, var(--info-dark) 100%);">
                                            <i class="fas fa-chart-bar"></i>
                                        </div>
                                        <div style="flex: 1; margin-left: 1rem;">
                                            <div class="font-weight-bold">Growth Rate</div>
                                            <div class="metric-value" style="color: var(--info-color);">+41.7%</div>
                                        </div>
                                    </div>
                                    
                                    <div class="metric-item">
                                        <div class="metric-icon" style="background: linear-gradient(135deg, var(--danger-color) 0%, var(--danger-dark) 100%);">
                                            <i class="fas fa-cow"></i>
                                        </div>
                                        <div style="flex: 1; margin-left: 1rem;">
                                            <div class="font-weight-bold">Most Growing Livestock</div>
                                            <div class="metric-value" style="color: var(--danger-color);">Holstein Friesian</div>
                                        </div>
                                    </div>
                                    
                                    <div class="metric-item">
                                        <div class="metric-icon">
                                            <i class="fas fa-seedling"></i>
                                        </div>
                                        <div style="flex: 1; margin-left: 1rem;">
                                            <div class="font-weight-bold">Breeding Success Rate</div>
                                            <div class="metric-value">85%</div>
                                        </div>
                                    </div>
                                    
                                    <div class="metric-item">
                                        <div class="metric-icon" style="background: linear-gradient(135deg, var(--success-color) 0%, var(--success-dark) 100%);">
                                            <i class="fas fa-heartbeat"></i>
                                        </div>
                                        <div style="flex: 1; margin-left: 1rem;">
                                            <div class="font-weight-bold">Health Improvement</div>
                                            <div class="metric-value" style="color: var(--success-color);">+30% reduction in illness</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- History Modal -->
                <div class="modal fade" id="historyModal" tabindex="-1" role="dialog" aria-labelledby="historyModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="historyModalLabel">
                                    <i class="fas fa-history mr-2"></i>Farm Analysis History
                                </h5>
                                <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="sortHistory" class="font-weight-bold">Sort By:</label>
                                        <select id="sortHistory" class="form-control">
                                            <option value="newest">Newest First</option>
                                            <option value="oldest">Oldest First</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="filterHistory" class="font-weight-bold">Filter By:</label>
                                        <select id="filterHistory" class="form-control">
                                            <option value="all">All</option>
                                            <option value="high">High Production</option>
                                            <option value="low">Low Production</option>
                                        </select>
                                    </div>
                                </div>
                                <div id="historyContent" class="row">
                                    <!-- History items will be dynamically sorted and displayed here -->
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">
                                    <i class="fas fa-times mr-1"></i>Close
                                </button>
                                <button type="button" class="btn btn-primary" onclick="exportHistory()">
                                    <i class="fas fa-download mr-1"></i>Export History
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
                <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

                <!-- DataTables Buttons -->
                <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css">
                <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
                <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
                <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
                <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>

                <!-- Required libraries for PDF/Excel -->
                <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

                <script>
                    const historyData = [
                        {
                            date: 'June 2025',
                            description: 'Record high production of 170 liters.',
                            chartData: [120, 135, 150, 140, 160, 170],
                            type: 'high'
                        },
                        {
                            date: 'May 2025',
                            description: 'Yield improved by 15% due to optimized breeding program.',
                            chartData: [120, 135, 150, 140, 160],
                            type: 'high'
                        },
                        {
                            date: 'April 2025',
                            description: 'Seasonal dip observed, addressed with cooling measures.',
                            chartData: [120, 135, 150, 140],
                            type: 'low'
                        },
                        {
                            date: 'March 2025',
                            description: 'Productivity stabilized at 150 liters.',
                            chartData: [120, 135, 150],
                            type: 'low'
                        },
                        {
                            date: 'February 2025',
                            description: 'Implemented new feeding strategy.',
                            chartData: [120, 135],
                            type: 'low'
                        },
                        {
                            date: 'January 2025',
                            description: 'Milk production increased by 10%.',
                            chartData: [120],
                            type: 'low'
                        }
                    ];

                    function renderHistory(sortOrder = 'newest', filter = 'all') {
                        let filteredData = [...historyData];
                        if (filter !== 'all') {
                            filteredData = filteredData.filter(entry => entry.type === filter);
                        }
                        if (sortOrder === 'oldest') {
                            filteredData.reverse();
                        }

                        const historyContent = document.getElementById('historyContent');
                        historyContent.innerHTML = '';

                        filteredData.forEach((entry, index) => {
                            const chartId = `historyChart${index}`;
                            const historyItem = document.createElement('div');
                            historyItem.classList.add('col-md-6', 'mb-4');
                            historyItem.innerHTML = `
                                <div class="card">
                                    <div class="card-body">
                                        <h6 class="font-weight-bold text-primary">
                                            <i class="fas fa-calendar-alt mr-2"></i>${entry.date}
                                        </h6>
                                        <p class="text-muted mb-3">${entry.description}</p>
                                        <canvas id="${chartId}" height="100"></canvas>
                                    </div>
                                </div>
                            `;
                            historyContent.appendChild(historyItem);

                            // Render chart for each history entry
                            const ctx = document.getElementById(chartId).getContext('2d');
                            new Chart(ctx, {
                                type: 'line',
                                data: {
                                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'].slice(0, entry.chartData.length),
                                    datasets: [{
                                        label: 'Milk Production (liters)',
                                        data: entry.chartData,
                                        backgroundColor: 'rgba(78, 115, 223, 0.1)',
                                        borderColor: 'rgba(78, 115, 223, 1)',
                                        borderWidth: 2,
                                        fill: true,
                                        tension: 0.4,
                                        pointBackgroundColor: 'rgba(78, 115, 223, 1)',
                                        pointBorderColor: '#fff',
                                        pointBorderWidth: 2,
                                        pointRadius: 4
                                    }]
                                },
                                options: {
                                    responsive: true,
                                    plugins: {
                                        legend: {
                                            display: false
                                        }
                                    },
                                    scales: { 
                                        y: { 
                                            beginAtZero: true,
                                            grid: {
                                                color: 'rgba(0,0,0,0.1)'
                                            }
                                        },
                                        x: {
                                            grid: {
                                                display: false
                                            }
                                        }
                                    }
                                }
                            });
                        });
                    }

                    function updateChart(option) {
                        const farm = farmData.F001;
                        let updatedData = farm.data;
                        let updatedLabels = farm.labels;
                        let label = 'Milk Production (liters)';
                        let color = 'rgba(78, 115, 223, 1)';
                        let bgColor = 'rgba(78, 115, 223, 0.1)';

                        switch (option) {
                            case 'milk':
                                updatedData = farm.data;
                                label = 'Milk Production (liters)';
                                color = 'rgba(78, 115, 223, 1)';
                                bgColor = 'rgba(78, 115, 223, 0.1)';
                                break;
                            case 'growth':
                                updatedData = [10, 15, 20, 25, 30, 35];
                                label = 'Growth Rate (%)';
                                color = 'rgba(28, 200, 138, 1)';
                                bgColor = 'rgba(28, 200, 138, 0.1)';
                                break;
                            case 'breeding':
                                updatedData = [75, 78, 82, 85, 88, 90];
                                label = 'Breeding Success Rate (%)';
                                color = 'rgba(246, 194, 62, 1)';
                                bgColor = 'rgba(246, 194, 62, 0.1)';
                                break;
                            case 'health':
                                updatedData = [85, 87, 89, 92, 94, 96];
                                label = 'Health Score (%)';
                                color = 'rgba(231, 74, 59, 1)';
                                bgColor = 'rgba(231, 74, 59, 0.1)';
                                break;
                        }

                        chartInstance.data.labels = updatedLabels;
                        chartInstance.data.datasets[0].data = updatedData;
                        chartInstance.data.datasets[0].label = label;
                        chartInstance.data.datasets[0].borderColor = color;
                        chartInstance.data.datasets[0].backgroundColor = bgColor;
                        chartInstance.data.datasets[0].pointBackgroundColor = color;
                        
                        chartInstance.update('active');
                    }

                    document.getElementById('sortHistory').addEventListener('change', (event) => {
                        renderHistory(event.target.value, document.getElementById('filterHistory').value);
                    });

                    document.getElementById('filterHistory').addEventListener('change', (event) => {
                        renderHistory(document.getElementById('sortHistory').value, event.target.value);
                    });

                    // Initialize with default sort order and filter
                    document.addEventListener('DOMContentLoaded', () => {
                        renderHistory();
                    });

                    // Export History function
                    function exportHistory() {
                        const sortOrder = document.getElementById('sortHistory').value;
                        const filter = document.getElementById('filterHistory').value;
                        
                        let filteredData = [...historyData];
                        if (filter !== 'all') {
                            filteredData = filteredData.filter(entry => entry.type === filter);
                        }
                        if (sortOrder === 'oldest') {
                            filteredData.reverse();
                        }

                        const headers = ['Date', 'Description', 'Type'];
                        const rows = filteredData.map(entry => [entry.date, entry.description, entry.type]);

                        let csvContent = "data:text/csv;charset=utf-8,"
                            + headers.join(",") + "\n"
                            + rows.map(e => e.join(",")).join("\n");

                        const encodedUri = encodeURI(csvContent);
                        const link = document.createElement("a");
                        link.setAttribute("href", encodedUri);
                        link.setAttribute("download", "farm_analysis_history.csv");
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                    }
                </script>

                <script>
                  // Sample different data for farms, you can expand this
                  const farmData = {
                    F001: {
                      labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                      data: [120, 135, 150, 140, 160, 170],
                      analysis: 'Milk production showed a consistent upward trend from January through June, indicating improved herd health and effective farm management practices. The gradual increase suggests that nutritional plans, breeding programs, and overall livestock care are positively impacting productivity. Continued monitoring and optimization of feed quality and animal welfare are recommended to sustain this growth. Seasonal factors and environmental conditions may also influence production levels, so maintaining detailed records will help in identifying further areas for improvement.'
                    },
                    F002: {
                      labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                      data: [90, 95, 100, 105, 110, 115],
                      analysis: 'Moderate milk production growth from January to June with potential seasonal dips.'
                    }
                  };

                  let chartInstance;

                  // Initialize chart on page load with default farm (F001)
                  document.addEventListener('DOMContentLoaded', function () {
                    const chartElem = document.getElementById('lineChart');
                    if (!chartElem) {
                      console.error('Chart element not found');
                      return;
                    }
                    const ctx = chartElem.getContext('2d');
                    const farm = farmData.F001;
                    
                    chartInstance = new Chart(ctx, {
                      type: 'line',
                      data: {
                        labels: farm.labels,
                        datasets: [{
                          label: 'Milk Production (liters)',
                          data: farm.data,
                          backgroundColor: 'rgba(78, 115, 223, 0.1)',
                          borderColor: 'rgba(78, 115, 223, 1)',
                          borderWidth: 3,
                          fill: true,
                          tension: 0.4,
                          pointBackgroundColor: 'rgba(78, 115, 223, 1)',
                          pointBorderColor: '#fff',
                          pointBorderWidth: 2,
                          pointRadius: 6,
                          pointHoverRadius: 8
                        }]
                      },
                      options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                          legend: {
                            display: true,
                            position: 'top',
                            labels: {
                              usePointStyle: true,
                              padding: 20,
                              font: {
                                size: 14,
                                weight: 'bold'
                              }
                            }
                          }
                        },
                        scales: { 
                          y: { 
                            beginAtZero: true,
                            grid: {
                              color: 'rgba(0,0,0,0.1)',
                              drawBorder: false
                            },
                            ticks: {
                              font: {
                                size: 12
                              }
                            }
                          },
                          x: {
                            grid: {
                              display: false
                            },
                            ticks: {
                              font: {
                                size: 12
                              }
                            }
                          }
                        },
                        elements: {
                          point: {
                            hoverBackgroundColor: '#fff'
                          }
                        }
                      }
                    });

                    // Navbar search functionality
                    $('#navbarSearch').on('keypress', function(e) {
                        if (e.which === 13) { // Enter key
                            performNavbarSearch();
                        }
                    });
                  });

                  // Export CSV (Milk Production data)
                  function exportCSV() {
                    // Use default farm F001 for export
                    const farm = farmData.F001;
                    const headers = ['Month', 'Milk Production (liters)'];
                    const rows = farm.labels.map((month, i) => [month, farm.data[i]]);

                    let csvContent = "data:text/csv;charset=utf-8,"
                      + headers.join(",") + "\n"
                      + rows.map(e => e.join(",")).join("\n");

                    const encodedUri = encodeURI(csvContent);
                    const link = document.createElement("a");
                    link.setAttribute("href", encodedUri);
                    link.setAttribute("download", "F001_production_analysis.csv");
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                  }

                  // Export PNG (line chart)
                  function exportPNG() {
                    const canvas = document.getElementById('lineChart');
                    const link = document.createElement('a');
                    link.download = 'production_analysis_chart.png';
                    link.href = canvas.toDataURL('image/png');
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                  }

                  // Export PDF (line chart and analysis)
                  async function exportPDF() {
                    if (!window.jspdf || !window.jspdf.jsPDF) {
                      alert('jsPDF library not loaded.');
                      return;
                    }
                    const { jsPDF } = window.jspdf;
                    const pdf = new jsPDF();

                    // Title
                    pdf.setFontSize(18);
                    pdf.text("Farm Productivity Analysis", 14, 22);

                    // Chart image
                    const canvas = document.getElementById('lineChart');
                    if (!canvas) {
                      alert('Chart not found.');
                      return;
                    }
                    const imgData = canvas.toDataURL('image/png');
                    pdf.addImage(imgData, 'PNG', 15, 30, 180, 100);

                    // Analysis text
                    const farm = farmData.F001;
                    pdf.setFontSize(12);
                    pdf.text(farm.analysis, 14, 140, { maxWidth: 180 });

                    pdf.save('F001_production_analysis.pdf');
                  }

                  // Print Productivity Analysis
                  function printProductivity() {
                    const printContents = document.querySelector('.card.shadow.mb-4').outerHTML;
                    const originalContents = document.body.innerHTML;
                    document.body.innerHTML = printContents;
                    window.print();
                    document.body.innerHTML = originalContents;
                    window.location.reload();
                  }

                  function performNavbarSearch() {
                      const searchTerm = document.getElementById('navbarSearch').value.trim();
                      
                      if (searchTerm === '') {
                          showSearchNotification('Please enter a search term');
                          return;
                      }

                      // Search functionality for farm analysis
                      const searchResults = searchFarmData(searchTerm);
                      
                      // Show notification with results
                      showSearchNotification(`Found ${searchResults.length} result(s) for "${searchTerm}"`);
                      
                      // Clear search field after 2 seconds
                      setTimeout(() => {
                          document.getElementById('navbarSearch').value = '';
                      }, 2000);
                  }

                  function searchFarmData(searchTerm) {
                      // Search through farm data
                      const results = [];
                      const searchLower = searchTerm.toLowerCase();
                      
                      // Search in farm data
                      Object.keys(farmData).forEach(farmId => {
                          const farm = farmData[farmId];
                          if (farmId.toLowerCase().includes(searchLower) || 
                              farm.analysis.toLowerCase().includes(searchLower)) {
                              results.push({ type: 'farm', id: farmId, data: farm });
                          }
                      });
                      
                      return results;
                  }

                  function showSearchNotification(message) {
                      // Create notification element
                      const notification = document.createElement('div');
                      notification.className = 'alert alert-info alert-dismissible fade show position-fixed';
                      notification.style.cssText = 'top: 100px; right: 20px; z-index: 9999; min-width: 300px;';
                      notification.innerHTML = `
                          <i class="fas fa-search"></i>
                          ${message}
                          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                          </button>
                      `;
                      
                      // Add to page
                      document.body.appendChild(notification);
                      
                      // Auto remove after 3 seconds
                      setTimeout(() => {
                          if (notification.parentNode) {
                              notification.parentNode.removeChild(notification);
                          }
                      }, 3000);
                  }
                </script>

                </div>
                <!-- End of Container Fluid -->

            </div>
            <!-- End of Main Content -->

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->
    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="logoutModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header border-0 pb-0">
            <h5 class="modal-title" id="logoutModalLabel">
              <i class="fas fa-sign-out-alt"></i> Ready to Leave?
            </h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body pt-0">
            Select "Logout" below if you are ready to end your current session.
          </div>
          <div class="modal-footer border-0 pt-0">
            <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Cancel</button>
            <a href="login.html" class="btn btn-primary" id="globalLogoutBtn">
              <i class="fas fa-sign-out-alt mr-2"></i>Logout
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="js/sb-admin-2.min.js"></script>

    <script>
    document.getElementById('globalLogoutBtn')?.addEventListener('click', function(e) {
      e.preventDefault();
      window.location.href = 'login.html';
    });
    </script>

</body>

</html>